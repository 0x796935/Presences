const presence = new Presence({
    clientId: "706956748329713685"
});
const browsingStamp = Math.floor(Date.now() / 1000);
var pathname, query1, query2, query3, query4, query5, query6, query7;
presence.on("iFrameData", (data) => {
    pathname = data.pathnameA;
    query1 = data.queryA;
    query2 = data.queryB;
    query3 = data.queryC;
    query4 = data.queryD;
    query5 = data.queryE;
    query6 = data.queryF;
    query7 = data.queryG;
});
presence.on("UpdateData", () => {
    if (!location.pathname.startsWith("/frames")) {
        pathname = window.location.pathname;
        query1 = document.querySelector("div.boardBanner>div.boardTitle");
        query2 = document.querySelector("div.boxbar>h2");
        query3 = document.querySelector("div.pagelist>div.pages");
        query4 = document.querySelector("div.pagelist>div.pages>strong");
        query5 = document.querySelector("table#postForm");
        query6 = document.querySelector("#togglePostFormLink");
        query7 = document.querySelector("div#quickReply");
        query1 = query1 ? query1.textContent : false;
        query2 = query2 ? query2.textContent : false;
        query3 = query3 ? query3.lastElementChild.textContent : false;
        query4 = query4 ? query4.textContent : false;
        query5 = query5 ? true : false;
        query6 = query6 ? query6.hasAttribute("style") : false;
        query7 = query7 ? true : false;
    }
    let title;
    var getTitle = function () {
        if (!query1)
            title = query2;
        else
            title = query1;
        if (query3)
            title += ` - ${query4}/${query3}`;
        return title;
    };
    const presenceData = {
        details: getTitle(),
        largeImageKey: "logo",
        startTimestamp: browsingStamp
    };
    if (pathname == "/")
        presenceData.details = "Home";
    else if (pathname && pathname.includes("/thread/")) {
        var ThreadId = pathname.split("/");
        presenceData.state = `Thread ${ThreadId[Number(ThreadId.indexOf("thread") + 1)]}`;
    }
    if (query6 || query7) {
        presenceData.smallImageKey = "writing";
        presenceData.smallImageText = "Replying/Posting";
    }
    presenceData.startTimestamp = browsingStamp;
    if (presenceData.details == null) {
        presence.setTrayTitle();
        presence.setActivity();
    }
    else
        presence.setActivity(presenceData);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2VuY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9wcmVzZW5jZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLFFBQVEsR0FBRyxJQUFJLFFBQVEsQ0FBQztJQUM1QixRQUFRLEVBQUUsb0JBQW9CO0NBQy9CLENBQUMsQ0FBQztBQUNILE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ3BELElBQUksUUFBUSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQztBQUNyRSxRQUFRLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0lBQ2pDLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQ3ZCLENBQUMsQ0FBQyxDQUFDO0FBQ0gsUUFBUSxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO0lBQzdCLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRTtRQUM1QyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFDcEMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMs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