const presence = new Presence({ clientId: "692807649204502528" });
let ssong, slisteners, sdj;
async function newStats() {
    const data = await window
        .fetch("https://cp.curvefm.com/api/nowplaying/1")
        .then((res) => res.json());
    ssong = data.now_playing.song.text;
    sdj = data.live.is_live ? "DJ " + data.live.streamer_name : "AutoDJ";
    slisteners = data.listeners.unique + " Listeners";
}
setInterval(newStats, 5000);
newStats();
const stamp = Math.floor(Date.now() / 1000);
presence.on("UpdateData", () => {
    const presenceData = {
        largeImageKey: "curvelogo",
        details: `${sdj} â€¢ ${slisteners || "Loading statistics"}`,
        state: `${ssong || "Loading song"}`,
        startTimestamp: stamp
    };
    presence.setActivity(presenceData);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlc2VuY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9wcmVzZW5jZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLFFBQVEsR0FBRyxJQUFJLFFBQVEsQ0FBQyxFQUFFLFFBQVEsRUFBRSxvQkFBb0IsRUFBRSxDQUFDLENBQUM7QUFDbEUsSUFBSSxLQUFLLEVBQUUsVUFBVSxFQUFFLEdBQUcsQ0FBQztBQUUzQixLQUFLLFVBQVUsUUFBUTtJQUNyQixNQUFNLElBQUksR0FBRyxNQUFNLE1BQU07U0FDdEIsS0FBSyxDQUFDLHlDQUF5QyxDQUFDO1NBQ2hELElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7SUFDN0IsS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztJQUNuQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO0lBQ3JFLFVBQVUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUM7QUFDcEQsQ0FBQztBQUVELFdBQVcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDNUIsUUFBUSxFQUFFLENBQUM7QUFFWCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUM1QyxRQUFRLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7SUFDN0IsTUFBTSxZQUFZLEdBQWlCO1FBQ2pDLGFBQWEsRUFBRSxXQUFXO1FBQzFCLE9BQU8sRUFBRSxHQUFHLEdBQUcsTUFBTSxVQUFVLElBQUksb0JBQW9CLEVBQUU7UUFDekQsS0FBSyxFQUFFLEdBQUcsS0FBSyxJQUFJLGNBQWMsRUFBRTtRQUNuQyxjQUFjLEVBQUUsS0FBSztLQUN0QixDQUFDO0lBQ0YsUUFBUSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUNyQyxDQUFDLENBQUMsQ0FBQyJ9